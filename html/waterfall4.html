<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    </head>
    <body>
        <style>
            .masonry { 
                width: 100%;
                margin-top: 50px;
                position:relative;
            }
            .item { 
                z-index: 10;
                transition: 0.25s;
                overflow: hidden;
                position: absolute;
            }
            .item img{
                width: 100%;
                height: 100%;
            }
        </style>
        <div class="masonry"> 
            <div class="item"> 
                <img src="../images/waterFall/1.jpg" alt="">
            </div> 
            <div class="item"> 
                <img src="../images/waterFall/2.jpg" alt=""> 
            </div>
            <div class="item"> 
                <img src="../images/waterFall/3.jpg" alt="">
            </div>
            <div class="item"> 
                <img src="../images/waterFall/4.jpg" alt="">
            </div>
            <div class="item"> 
                <img src="../images/waterFall/5.jpg" alt="">
            </div>
            <div class="item"> 
                <img src="../images/waterFall/6.jpg" alt="">
            </div> 
            <div class="item"> 
                <img src="../images/waterFall/7.jpg" alt=""> 
            </div>
            <div class="item"> 
                <img src="../images/waterFall/8.jpg" alt="">
            </div>
            <div class="item"> 
                <img src="../images/waterFall/9.jpg" alt=""> 
            </div>

            <!-- more items --> 
        </div>
        <script>
            window.onload = function() {
                function waterFall() {
                    var pageWidth = document.documentElement.clientWidth - 8;
                    var columns = 3; //3列
                    var itemWidth = parseInt(pageWidth/columns);
                    var item = document.getElementsByClassName("item")
                    var arr = [];
                    for(let i=0; i<item.length; i++) {
                        // 设置每一个item的宽度
                        item[i].style.width = itemWidth + 'px'
                        let imgList = item[i].childNodes
                        for(let b=0; b<imgList.length;b++) {
                            if(imgList[b].nodeName == "#text") {
                                item[i].removeChild(imgList[b])
                            }
                        }
                        // console.log(item[i])
                        let width = imgList[0].width
                        let height = imgList[0].height
                        let bi = itemWidth/width;
                        let boxheight = parseInt(height*bi); //图片的高度*比值 = item的高度
                        item[i].style.height = boxheight + 'px'

                        if(i < columns) {
                            item[i].style.top = 0 + 'px'
                            item[i].style.left = (itemWidth+5) * i + 'px'
                            arr.push(boxheight)
                        }else {
                            let minHeight = arr[0];
                            let index = 0;
                            for (let j = 0; j < arr.length; j++) {
                                if (minHeight > arr[j]) {
                                    minHeight = arr[j];
                                    index = j;
                                }
                            }
                            // console.log(arr)
                            // console.log(index)
                            item[i].style.top = arr[index] + 'px'
                            // console.log(item[index].style.left)
                            item[i].style.left = item[index].style.left
                            arr[index] = arr[index] + boxheight;
                        }
                    }
                    
                }
                waterFall()
            }
        </script>   
    </body>
</html>